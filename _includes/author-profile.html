{% include base_path %}

{% if page.author and site.data.authors[page.author] %}
  {% assign author = site.data.authors[page.author] %}
{% else %}
  {% assign author = site.author %}
{% endif %}

<div itemscope itemtype="http://schema.org/Person">

  <!-- Avatar -->
  <div class="author__avatar">
    {% if author.avatar contains "://" %}
      <img src="{{ author.avatar }}" alt="{{ author.name }}" fetchpriority="high" />
    {% else %}
      <img src="{{ author.avatar | prepend: "/images/" | prepend: base_path }}"
           alt="{{ author.name }}" fetchpriority="high" />
    {% endif %}
  </div>

  <!-- Name & bio -->
  <div class="author__content">
    <h3 class="author__name">{{ author.name }}</h3>
    {% if author.pronouns %}
      <p class="author__pronouns">{{ author.pronouns }}</p>
    {% endif %}
    {% if author.bio %}
      <p class="author__bio">{{ author.bio }}</p>
    {% endif %}
  </div>

  <!-- Links -->
  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>

    <ul class="author__urls social-icons">

      <!-- Biographic information -->
      {% if author.location %}
        <li class="author__desktop">
          <i class="fas fa-fw fa-location-dot icon-pad-right" aria-hidden="true"></i>
          {{ author.location }}
        </li>
      {% endif %}

      {% if author.employer %}
        <li class="author__desktop">
          <i class="fas fa-fw fa-building-columns icon-pad-right" aria-hidden="true"></i>
          {{ author.employer }}
        </li>
      {% endif %}

      {% if author.uri %}
        <li>
          <a href="{{ author.uri }}">
            <i class="fas fa-fw fa-link icon-pad-right" aria-hidden="true"></i>
            {{ site.data.ui-text[site.locale].website_label | default: "Website" }}
          </a>
        </li>
      {% endif %}

      {% if author.email %}
        <li>
          <a href="mailto:{{ author.email }}">
            <i class="fas fa-fw fa-envelope icon-pad-right" aria-hidden="true"></i>
            {{ site.data.ui-text[site.locale].email_label | default: "Email" }}
          </a>
        </li>
      {% endif %}

      <!-- Academic websites -->
      {% if author.googlescholar %}
        <li>
          <a href="{{ author.googlescholar }}">
            <i class="ai ai-google-scholar ai-fw icon-pad-right"></i>
            Google Scholar
          </a>
        </li>
      {% endif %}

      <!-- Softlab (CUSTOM) : placed right below Google Scholar -->
      {% if author.lab1 %}
        <li class="author__softlab">
          <a href="{{ author.lab1 }}" target="_blank" rel="noopener">
            <img src="{{ '/images/Softlab.png' | prepend: base_path }}"
                 alt="Softlab"
                 class="author__softlab-icon" />
            Softlab
          </a>
        </li>
      {% endif %}

      {% if author.orcid %}
        <li>
          <a href="{{ author.orcid }}">
            <i class="ai ai-orcid ai-fw icon-pad-right"></i>
            ORCID
          </a>
        </li>
      {% endif %}

      <!-- Repositories -->
      {% if author.github %}
        <li>
          <a href="https://github.com/{{ author.github }}">
            <i class="fab fa-fw fa-github icon-pad-right" aria-hidden="true"></i>
            GitHub
          </a>
        </li>
      {% endif %}

      <!-- Social -->
      {% if author.bluesky %}
        <li>
          <a href="https://bsky.app/profile/{{ author.bluesky }}">
            <i class="fab fa-fw fa-bluesky icon-pad-right" aria-hidden="true"></i>
            Bluesky
          </a>
        </li>
      {% endif %}

    </ul>
  </div>
</div>