{% assign cv = site.data.cv %}

<style>
  .archive {
    width: 80%;
    margin: 0 auto;
    float: none;
    padding-right: 0;
  }
  @media (min-width: 80em) {
    .archive { width: 70%; }
  }
</style>

<div class="cv-container">

  <!-- Basic Information -->
  <div class="cv-section cv-header">
    <h1>{{ cv.basics.name }}</h1>
    {% if cv.basics.label %}<h2>{{ cv.basics.label }}</h2>{% endif %}

    <div class="cv-contact">
      {% if cv.basics.email %}
      <div class="cv-contact-item"><i class="fas fa-envelope"></i> {{ cv.basics.email }}</div>
      {% endif %}

      {% if cv.basics.phone %}
      <div class="cv-contact-item"><i class="fas fa-phone"></i> {{ cv.basics.phone }}</div>
      {% endif %}

      {% if cv.basics.website %}
      <div class="cv-contact-item">
        <i class="fas fa-globe"></i> <a href="{{ cv.basics.website }}" target="_blank">{{ cv.basics.website }}</a>
      </div>
      {% endif %}

      {% if cv.basics.location.city %}
      <div class="cv-contact-item">
        <i class="fas fa-map-marker-alt"></i>
        {{ cv.basics.location.city }}{% if cv.basics.location.region %}, {{ cv.basics.location.region }}{% endif %}{% if cv.basics.location.countryCode %}, {{ cv.basics.location.countryCode }}{% endif %}
      </div>
      {% endif %}
    </div>

    {% if cv.basics.profiles and cv.basics.profiles.size > 0 %}
    <div class="cv-profiles">
      {% for profile in cv.basics.profiles %}
      <a href="{{ profile.url }}" target="_blank" class="cv-profile-link">
        <i class="fab fa-{{ profile.network | downcase }}"></i> {{ profile.network }}
      </a>
      {% endfor %}
    </div>
    {% endif %}
  </div>

  <!-- Summary -->
  {% if cv.basics.summary %}
  <div class="cv-section">
    <h2>Summary</h2>
    <p>{{ cv.basics.summary }}</p>
  </div>
  {% endif %}

  <!-- Education -->
  {% if cv.education and cv.education.size > 0 %}
  <div class="cv-section">
    <h2>Education</h2>
    <ul class="cv-list">
      {% for education in cv.education %}
      <li class="cv-item">
        <div class="cv-item-header">
          <div class="cv-item-title">{{ education.institution }}</div>
          <div class="cv-item-date">
            {% if education.startDate %}{{ education.startDate }}{% endif %}
            {% if education.startDate and education.endDate %} – {% endif %}
            {% if education.endDate %}{{ education.endDate }}{% endif %}
          </div>
        </div>

        <div class="cv-item-content">
          <div class="cv-item-subtitle">{{ education.studyType }} in {{ education.area }}</div>
          {% if education.gpa %}
          <div class="cv-item-detail cv-compact">GPA: {{ education.gpa }}</div>
          {% endif %}
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

<!-- Experience (Research/Work combined) -->
  {% if cv.work and cv.work.size > 0 %}
  <div class="cv-section">
    <h2>Research Experience</h2>
    <ul class="cv-list">
      {% for work in cv.work %}
      <li class="cv-item">

        <div class="cv-item-header">
          <!-- 한 줄: Position — Institution (Lab) -->
          <div class="cv-item-title">
            {{ work.position }}
            {% if work.institution %} — {{ work.institution }}{% endif %}
            {% if work.lab %} ({{ work.lab }}){% endif %}
          </div>

          <!-- 날짜 -->
          <div class="cv-item-date">
            {% if work.startDate %}{{ work.startDate }}{% endif %}
            {% if work.startDate and work.endDate %} – {% endif %}
            {% if work.endDate %}{{ work.endDate }}{% endif %}
          </div>
        </div>

        <div class="cv-item-content">
          {% if work.topics and work.topics.size > 0 %}
          <div class="cv-item-detail"><strong>Topics:</strong> {{ work.topics | join: ", " }}</div>
          {% endif %}

          {% if work.keywords and work.keywords.size > 0 %}
          <div class="cv-item-detail"><strong>Keywords:</strong> {{ work.keywords | join: ", " }}</div>
          {% endif %}

          {% if work.advisor %}
          <div class="cv-item-detail"><strong>Advisor:</strong> {{ work.advisor }}</div>
          {% endif %}
        </div>

      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <!-- Publications -->
  {% if cv.publications and cv.publications.size > 0 %}
  <div class="cv-section">
    <h2>Publications</h2>
    <ul class="cv-list">
      {% for publication in cv.publications %}
      <li class="cv-item">
        <div class="cv-item-header">
          <div class="cv-item-title">{{ publication.name }}</div>
          <div class="cv-item-date">{{ publication.releaseDate | slice: 0, 4 }}</div>
        </div>
        <div class="cv-item-content">
          <div class="cv-item-subtitle">{{ publication.publisher }}</div>
          {% if publication.summary %}<div class="cv-item-detail cv-compact">{{ publication.summary }}</div>{% endif %}
          {% if publication.website %}
          <div class="cv-item-detail cv-compact"><a href="{{ publication.website }}" target="_blank">View Publication</a></div>
          {% endif %}
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <!-- Presentations -->
  {% if cv.presentations and cv.presentations.size > 0 %}
  <div class="cv-section">
    <h2>Conference Presentations</h2>

    <ul class="cv-list">
      {% for talk in cv.presentations %}
      <li class="cv-item">
        <!-- 1) 학회명(메인) + (장소 · 날짜)(서브) -->
        <div class="cv-item-header">
          <div class="cv-item-title">
            {{ talk.event }}
            {% if talk.location or talk.date %}
            <span class="cv-present-meta">
              (
              {% if talk.location %}{{ talk.location }}{% endif %}
              {% if talk.location and talk.date %} · {% endif %}
              {% if talk.date %}{{ talk.date }}{% endif %}
              )
            </span>
            {% endif %}
          </div>
          <div class="cv-item-date">{{ talk.date | slice: 0, 4 }}</div>
        </div>

        <!-- 2) 발표 제목(아래로) -->
        {% if talk.name %}
        <div class="cv-item-content">
          <div class="cv-item-detail cv-present-title">{{ talk.name }}</div>
        </div>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <!-- Awards -->
  {% if cv.awards and cv.awards.size > 0 %}
  <div class="cv-section">
    <h2>Awards & Honors</h2>
    <ul class="cv-list">
      {% for award in cv.awards %}
      <li class="cv-item">
        <div class="cv-item-header">
          <div class="cv-item-title">{{ award.title }}</div>
          <div class="cv-item-date">{{ award.date }}</div>
        </div>
        <div class="cv-item-content">
          <div class="cv-item-subtitle">{{ award.awarder }}</div>
          {% if award.summary %}<div class="cv-item-detail cv-compact">{{ award.summary }}</div>{% endif %}
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <!-- Optional sections -->
  {% if cv.skills and cv.skills.size > 0 %}
  <div class="cv-section">
    <h2>Skills</h2>
    <div class="cv-skills">
      {% for skill in cv.skills %}
      <div class="cv-skill-category">
        <h3>{{ skill.name }}</h3>
        <ul class="cv-skill-list">
          {% for keyword in skill.keywords %}<li>{{ keyword }}</li>{% endfor %}
        </ul>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% if cv.languages and cv.languages.size > 0 %}
  <div class="cv-section">
    <h2>Languages</h2>
    <ul class="cv-list">
      {% for language in cv.languages %}
      <li class="cv-item">
        <div class="cv-item-content">
          <div class="cv-item-title">{{ language.language }}</div>
          <div class="cv-item-detail cv-compact">{{ language.fluency }}</div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  {% if cv.interests and cv.interests.size > 0 %}
  <div class="cv-section">
    <h2>Interests</h2>
    <ul class="cv-list">
      {% for interest in cv.interests %}
      <li class="cv-item">
        <div class="cv-item-content">
          <div class="cv-item-title">{{ interest.name }}</div>
          {% if interest.keywords and interest.keywords.size > 0 %}
          <div class="cv-item-detail cv-compact">{{ interest.keywords | join: ", " }}</div>
          {% endif %}
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  {% if cv.references and cv.references.size > 0 %}
  <div class="cv-section">
    <h2>References</h2>
    <ul class="cv-list">
      {% for reference in cv.references %}
      <li class="cv-item">
        <div class="cv-item-content">
          <div class="cv-item-title">{{ reference.name }}</div>
          {% if reference.reference %}<div class="cv-item-detail cv-compact">{{ reference.reference }}</div>{% endif %}
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

</div>